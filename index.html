<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SKANWEARÂ® Community</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Sidebar Navigation -->
  <aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo-wrap">
        <img src="https://res.cloudinary.com/glide/image/fetch/f_auto,h_225,c_limit/https%3A%2F%2Ffirebasestorage.googleapis.com%2Fv0%2Fb%2Fglide-prod.appspot.com%2Fo%2Ficon-images%252Fanonymous-ffba51fe-f9de-4950-ab3f-a7653a0a8e55.png%3Falt%3Dmedia%26token%3De6c193e1-b95e-4a2b-adc3-40c9cbe05c9f"
          alt="SKANWEAR logo" class="logo"/>
      </div>
      <span class="brand-name">SKANWEARÂ®</span>
      <button id="sidebarToggle" class="sidebar-toggle" aria-label="Toggle sidebar">
        <span></span><span></span><span></span>
      </button>
    </div>
    <nav>
      <ul>
        <li data-page="feedPage" class="active glass-nav">
          <span>ğŸ </span>
          <span class="nav-label">Feed</span>
        </li>
        <li data-page="contactsPage" class="glass-nav">
          <span>ğŸ‘¤</span>
          <span class="nav-label">Contacts</span>
        </li>
        <li data-page="messagesPage" class="glass-nav">
          <span>ğŸ’¬</span>
          <span class="nav-label">Messages</span>
        </li>
        <li data-page="companiesPage" class="glass-nav">
          <span>ğŸ’¼</span>
          <span class="nav-label">Companies</span>
        </li>
      </ul>
    </nav>
    <button id="addProfileBtn" class="add-btn glass sidebar-btn">+ Add Profile</button>
  </aside>
  <main id="mainContent">
    <!-- Feed Section -->
    <section id="feedPage" class="page active">
      <header class="feed-header" style="padding-left:40px;">
        <h1>Feed</h1>
        <button class="add-btn glass" id="addPostBtn">+ Post</button>
      </header>
      <div class="stories-bar">
        <div class="story">
          <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Christina"/>
          <span>Christina</span>
        </div>
        <div class="story">
          <img src="https://randomuser.me/api/portraits/men/44.jpg" alt="Bobby"/>
          <span>Bobby</span>
        </div>
        <div class="story">
          <img src="https://randomuser.me/api/portraits/women/22.jpg" alt="Elina"/>
          <span>Elina</span>
        </div>
        <div class="story">
          <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="Derek"/>
          <span>Derek</span>
        </div>
        <div class="story">
          <img src="https://randomuser.me/api/portraits/women/60.jpg" alt="Christiana"/>
          <span>Christiana</span>
        </div>
        <div class="story">
          <img src="https://randomuser.me/api/portraits/men/52.jpg" alt="Alan"/>
          <span>Alan</span>
        </div>
      </div>
      <!-- FEED POSTS -->
      <div id="feedPosts" class="insta-feed">
        <div class="insta-post" data-likes="43" data-replies='["Great session!","I agree, super useful.","Loved the Q&A."]'>
          <div class="insta-post-bg"></div>
          <div class="insta-post-glass">
            <div class="insta-post-header">
              <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Christina">
              <div>
                <div class="insta-post-author">Christina</div>
                <div class="insta-post-info">Engineer Â· SKANWEAR Â· 2h ago</div>
              </div>
            </div>
            <img class="insta-post-img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80" alt="Post image">
            <div class="insta-post-body">Excited to be at the new safety training seminar today!</div>
            <div class="insta-post-actions">
              <button class="like-btn"><span>â¤ï¸</span> <span class="like-count">43</span></button>
              <button class="reply-btn"><span>ğŸ’¬</span> <span class="reply-count">3</span> Reply</button>
              <button class="share-btn"><span>ğŸ”—</span> Share</button>
            </div>
            <div class="reply-messages"></div>
          </div>
        </div>
        <div class="insta-post" data-likes="27" data-replies='["Looks awesome!","How do we get one?"]'>
          <div class="insta-post-bg"></div>
          <div class="insta-post-glass">
            <div class="insta-post-header">
              <img src="https://randomuser.me/api/portraits/men/44.jpg" alt="Bobby">
              <div>
                <div class="insta-post-author">Bobby</div>
                <div class="insta-post-info">Manager Â· SKANWEAR Â· 3h ago</div>
              </div>
            </div>
            <img class="insta-post-img" src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=600&q=80" alt="Post image">
            <div class="insta-post-body">Hereâ€™s a look at the new protective gear we received!</div>
            <div class="insta-post-actions">
              <button class="like-btn"><span>â¤ï¸</span> <span class="like-count">27</span></button>
              <button class="reply-btn"><span>ğŸ’¬</span> <span class="reply-count">2</span> Reply</button>
              <button class="share-btn"><span>ğŸ”—</span> Share</button>
            </div>
            <div class="reply-messages"></div>
          </div>
        </div>
        <div class="insta-post" data-likes="31" data-replies='[]'>
          <div class="insta-post-bg"></div>
          <div class="insta-post-glass">
            <div class="insta-post-header">
              <img src="https://randomuser.me/api/portraits/women/22.jpg" alt="Elina">
              <div>
                <div class="insta-post-author">Elina</div>
                <div class="insta-post-info">Safety Lead Â· SKANWEAR Â· 4h ago</div>
              </div>
            </div>
            <img class="insta-post-img" src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?auto=format&fit=crop&w=600&q=80" alt="Post image">
            <div class="insta-post-body">Proud of my team for passing all the compliance checks this month. Keep it up!</div>
            <div class="insta-post-actions">
              <button class="like-btn"><span>â¤ï¸</span> <span class="like-count">31</span></button>
              <button class="reply-btn"><span>ğŸ’¬</span> <span class="reply-count">0</span> Reply</button>
              <button class="share-btn"><span>ğŸ”—</span> Share</button>
            </div>
            <div class="reply-messages"></div>
          </div>
        </div>
        <div class="insta-post" data-likes="20" data-replies='["Very sleek!"]'>
          <div class="insta-post-bg"></div>
          <div class="insta-post-glass">
            <div class="insta-post-header">
              <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="Derek">
              <div>
                <div class="insta-post-author">Derek</div>
                <div class="insta-post-info">Technician Â· SKANWEAR Â· 5h ago</div>
              </div>
            </div>
            <img class="insta-post-img" src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=600&q=80" alt="Post image">
            <div class="insta-post-body">Spot the difference! Our new equipment is sleeker and safer.</div>
            <div class="insta-post-actions">
              <button class="like-btn"><span>â¤ï¸</span> <span class="like-count">20</span></button>
              <button class="reply-btn"><span>ğŸ’¬</span> <span class="reply-count">1</span> Reply</button>
              <button class="share-btn"><span>ğŸ”—</span> Share</button>
            </div>
            <div class="reply-messages"></div>
          </div>
        </div>
      </div>
    </section>
    <!-- Contacts Section -->
    <section id="contactsPage" class="page">
      <header>
        <h1>Contacts</h1>
      </header>
      <ul class="contacts-list">
        <li class="contact-card" data-name="Christina" data-avatar="https://randomuser.me/api/portraits/women/65.jpg" data-role="Engineer" data-company="SKANWEAR" data-email="christina@skanwear.com">
          <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Christina" />
          <div>
            <div class="contact-name">Christina</div>
            <div class="contact-role">Engineer</div>
          </div>
        </li>
        <li class="contact-card" data-name="Bobby" data-avatar="https://randomuser.me/api/portraits/men/44.jpg" data-role="Manager" data-company="SKANWEAR" data-email="bobby@skanwear.com">
          <img src="https://randomuser.me/api/portraits/men/44.jpg" alt="Bobby" />
          <div>
            <div class="contact-name">Bobby</div>
            <div class="contact-role">Manager</div>
          </div>
        </li>
        <li class="contact-card" data-name="Elina" data-avatar="https://randomuser.me/api/portraits/women/22.jpg" data-role="Safety Lead" data-company="SKANWEAR" data-email="elina@skanwear.com">
          <img src="https://randomuser.me/api/portraits/women/22.jpg" alt="Elina" />
          <div>
            <div class="contact-name">Elina</div>
            <div class="contact-role">Safety Lead</div>
          </div>
        </li>
        <li class="contact-card" data-name="Derek" data-avatar="https://randomuser.me/api/portraits/men/22.jpg" data-role="Technician" data-company="SKANWEAR" data-email="derek@skanwear.com">
          <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="Derek" />
          <div>
            <div class="contact-name">Derek</div>
            <div class="contact-role">Technician</div>
          </div>
        </li>
        <li class="contact-card" data-name="Christiana" data-avatar="https://randomuser.me/api/portraits/women/60.jpg" data-role="HR" data-company="SKANWEAR" data-email="christiana@skanwear.com">
          <img src="https://randomuser.me/api/portraits/women/60.jpg" alt="Christiana" />
          <div>
            <div class="contact-name">Christiana</div>
            <div class="contact-role">HR</div>
          </div>
        </li>
        <li class="contact-card" data-name="Alan" data-avatar="https://randomuser.me/api/portraits/men/52.jpg" data-role="Sales" data-company="SKANWEAR" data-email="alan@skanwear.com">
          <img src="https://randomuser.me/api/portraits/men/52.jpg" alt="Alan" />
          <div>
            <div class="contact-name">Alan</div>
            <div class="contact-role">Sales</div>
          </div>
        </li>
      </ul>
    </section>
    <!-- Contact Detail Section -->
    <section id="contactDetailPage" class="page contact-detail-page">
      <button id="backToContacts" class="add-btn glass" style="margin-bottom:18px;">â† Back to Contacts</button>
      <div id="contactDetailContent"></div>
    </section>
    <!-- Messages Section -->
    <section id="messagesPage" class="page">
      <header>
        <h1>Messages</h1>
      </header>
      <div class="messages-layout">
        <aside class="messages-list">
          <div class="message-user active" data-user="Christina">
            <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Christina"/>
            <div>
              <div class="msg-user-name">Christina</div>
              <div class="msg-user-preview">Letâ€™s catch up later! ğŸ‘</div>
            </div>
          </div>
          <div class="message-user" data-user="Bobby">
            <img src="https://randomuser.me/api/portraits/men/44.jpg" alt="Bobby"/>
            <div>
              <div class="msg-user-name">Bobby</div>
              <div class="msg-user-preview">Sent you the docs!</div>
            </div>
          </div>
          <div class="message-user" data-user="Elina">
            <img src="https://randomuser.me/api/portraits/women/22.jpg" alt="Elina"/>
            <div>
              <div class="msg-user-name">Elina</div>
              <div class="msg-user-preview">Meeting at 3pm?</div>
            </div>
          </div>
          <div class="message-user" data-user="Derek">
            <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="Derek"/>
            <div>
              <div class="msg-user-name">Derek</div>
              <div class="msg-user-preview">Ready for the site visit!</div>
            </div>
          </div>
        </aside>
        <div class="messages-chat-window">
          <div class="chat-header">
            <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Christina">
            <span class="chat-username">Christina</span>
          </div>
          <div class="chat-body" id="chatBody">
            <div class="chat-message theirs">
              <div class="msg-bubble">Hi, how are you?</div>
            </div>
            <div class="chat-message yours">
              <div class="msg-bubble">Iâ€™m good, thanks! You?</div>
            </div>
            <div class="chat-message theirs">
              <div class="msg-bubble">Letâ€™s catch up later! ğŸ‘</div>
            </div>
          </div>
          <div class="chat-footer">
            <input type="text" id="chatInput" placeholder="Type a message..." autocomplete="off"/>
            <button id="chatSendBtn">Send</button>
          </div>
        </div>
      </div>
    </section>
    <!-- Companies Section -->
    <section id="companiesPage" class="page">
      <header>
        <h1>Companies</h1>
      </header>
      <div class="companies-list"></div>
      <div id="companyEmployees" style="margin-top:32px"></div>
    </section>
  </main>
  <script>
    // Sidebar nav button logic
    document.querySelectorAll('.sidebar nav ul li').forEach(el => {
      el.onclick = function() {
        document.querySelectorAll('.sidebar nav ul li').forEach(li => li.classList.remove('active'));
        this.classList.add('active');
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(this.dataset.page).classList.add('active');
      };
    });

    // Like and Reply button logic for each post
    document.querySelectorAll('.insta-post').forEach(function(post) {
      const likeBtn = post.querySelector('.like-btn');
      const replyBtn = post.querySelector('.reply-btn');
      const likeCount = likeBtn.querySelector('.like-count');
      const replyCount = replyBtn.querySelector('.reply-count');
      const replyMessages = post.querySelector('.reply-messages');
      let liked = false;
      let replying = false;

      // Set initial replies
      let replies = [];
      try { replies = JSON.parse(post.getAttribute('data-replies')); } catch(e) {}
      function renderReplies() {
        replyMessages.innerHTML = '';
        replies.forEach(reply => {
          const r = document.createElement('div');
          r.className = "reply-message";
          r.textContent = reply;
          replyMessages.appendChild(r);
        });
      }
      renderReplies();
      replyCount.textContent = replies.length;

      // Like button
      likeBtn.onclick = function() {
        liked = !liked;
        let count = parseInt(likeCount.textContent,10);
        if(liked) {
          likeBtn.classList.add('liked');
          likeCount.textContent = count+1;
        } else {
          likeBtn.classList.remove('liked');
          likeCount.textContent = count-1;
        }
      };

      // Reply button
      replyBtn.onclick = function() {
        if(replying) return;
        replying = true;
        replyBtn.classList.add('replying');
        // Reply box
        const box = document.createElement('div');
        box.className = 'reply-box';
        box.innerHTML = '<input type="text" maxlength="140" placeholder="Write a reply..."/><button type="button">Send</button>';
        replyMessages.parentNode.insertBefore(box, replyMessages.nextSibling);
        const input = box.querySelector('input');
        input.focus();
        box.querySelector('button').onclick = function() {
          const val = input.value.trim();
          if(val) {
            replies.push(val);
            renderReplies();
            replyCount.textContent = replies.length;
          }
          box.remove();
          replyBtn.classList.remove('replying');
          replying = false;
        };
        input.addEventListener('keydown', function(e){
          if(e.key==='Enter'){
            box.querySelector('button').click();
          }
        });
      };
    });

    // CONTACTS LIST LOGIC
    const contactsPage = document.getElementById('contactsPage');
    const contactDetailPage = document.getElementById('contactDetailPage');
    const contactDetailContent = document.getElementById('contactDetailContent');
    document.querySelectorAll('.contact-card').forEach(function(card){
      card.onclick = function() {
        contactDetailContent.innerHTML = `
          <div style="display:flex;gap:26px;align-items:center;">
            <img src="${card.dataset.avatar}" alt="${card.dataset.name}" style="width:90px;height:90px;border-radius:22px;border:4px solid #d64b43;box-shadow:0 2px 18px #d64b4340;background:#fff;">
            <div>
              <div style="font-size:1.7em;font-weight:700;color:#d64b43">${card.dataset.name}</div>
              <div style="font-size:1.09em;color:#444;margin:6px 0 8px 0;">${card.dataset.role} &bull; ${card.dataset.company}</div>
              <div style="font-size:1.04em;color:#888;"><span style="font-weight:600;">Email:</span> ${card.dataset.email}</div>
            </div>
          </div>
        `;
        contactsPage.classList.remove('active');
        contactDetailPage.classList.add('active');
      };
    });
    document.getElementById('backToContacts').onclick = function() {
      contactDetailPage.classList.remove('active');
      contactsPage.classList.add('active');
    };

    // MESSAGES TAB LOGIC
    const users = {
      "Christina": {
        avatar: "https://randomuser.me/api/portraits/women/65.jpg",
        chat: [
          {from: "them", text: "Hi, how are you?"},
          {from: "you", text: "Iâ€™m good, thanks! You?"},
          {from: "them", text: "Letâ€™s catch up later! ğŸ‘"}
        ]
      },
      "Bobby": {
        avatar: "https://randomuser.me/api/portraits/men/44.jpg",
        chat: [
          {from: "them", text: "Sent you the docs!"},
          {from: "you", text: "Thanks Bobby, received."},
        ]
      },
      "Elina": {
        avatar: "https://randomuser.me/api/portraits/women/22.jpg",
        chat: [
          {from: "them", text: "Meeting at 3pm?"},
          {from: "you", text: "Works for me!"},
        ]
      },
      "Derek": {
        avatar: "https://randomuser.me/api/portraits/men/22.jpg",
        chat: [
          {from: "them", text: "Ready for the site visit!"},
          {from: "you", text: "See you there!"},
        ]
      }
    };
    function renderChat(user) {
      const chatBody = document.getElementById('chatBody');
      const chatHeaderImg = document.querySelector('.chat-header img');
      const chatHeaderName = document.querySelector('.chat-header .chat-username');
      chatHeaderImg.src = users[user].avatar;
      chatHeaderName.textContent = user;
      chatBody.innerHTML = '';
      users[user].chat.forEach(msg => {
        const msgDiv = document.createElement('div');
        msgDiv.className = `chat-message ${msg.from === "you" ? "yours" : "theirs"}`;
        msgDiv.innerHTML = `<div class="msg-bubble">${msg.text}</div>`;
        chatBody.appendChild(msgDiv);
      });
      chatBody.scrollTop = chatBody.scrollHeight;
    }
    document.querySelectorAll('.message-user').forEach(node => {
      node.onclick = function() {
        document.querySelectorAll('.message-user').forEach(n => n.classList.remove('active'));
        this.classList.add('active');
        renderChat(this.dataset.user);
      };
    });
    // Initial chat
    renderChat("Christina");
    // Chat send
    document.getElementById('chatSendBtn').onclick = function() {
      const input = document.getElementById('chatInput');
      const msg = input.value.trim();
      if(msg) {
        const activeUser = document.querySelector('.message-user.active').dataset.user;
        users[activeUser].chat.push({from:"you",text:msg});
        renderChat(activeUser);
        input.value = "";
      }
    };
    document.getElementById('chatInput').addEventListener('keydown', function(e){
      if(e.key==="Enter") document.getElementById('chatSendBtn').click();
    });
  </script>
</body>
</html>
