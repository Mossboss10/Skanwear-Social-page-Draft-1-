<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SKANWEAR¬Æ Community</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Loader CSS should be included before your main app CSS -->
  <link rel="stylesheet" href="loader.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- LOADING SCREEN -->
  <div id="loaderScreen">
    <svg class="intro" viewBox="0 0 200 86">
      <text text-anchor="start" x="10" y="30" class="text text-stroke" clip-path="url(#text1)">Skanwear</text>
      <text text-anchor="start" x="10" y="50" class="text text-stroke" clip-path="url(#text2)">Saving</text>
      <text text-anchor="start" x="10" y="70" class="text text-stroke" clip-path="url(#text3)">Lives.</text>
      <text text-anchor="start" x="10" y="30" class="text text-stroke text-stroke-2" clip-path="url(#text1)">Skanwear</text>
      <text text-anchor="start" x="10" y="50" class="text text-stroke text-stroke-2" clip-path="url(#text2)">Saving</text>
      <text text-anchor="start" x="10" y="70" class="text text-stroke text-stroke-2" clip-path="url(#text3)">Lives.</text>
      <defs>
        <clipPath id="text1">
          <text text-anchor="start" x="10" y="30" class="text">Skanwear</text>
        </clipPath>
        <clipPath id="text2">
          <text text-anchor="start" x="10" y="50" class="text">Saving</text>
        </clipPath>
        <clipPath id="text3">
          <text text-anchor="start" x="10" y="70" class="text">Lives.</text>
        </clipPath>
      </defs>
    </svg>
  </div>

  <!-- Main App (hidden at first, shown after loader) -->
  <div id="mainApp" style="display:none;">
    <!-- Sidebar Navigation -->
    <aside id="sidebar" class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo-wrap">
          <img src="https://res.cloudinary.com/glide/image/fetch/f_auto,h_225,c_limit/https%3A%2F%2Ffirebasestorage.googleapis.com%2Fv0%2Fb%2Fglide-prod.appspot.com%2Fo%2Ficon-images%252Fanonymous-ffba51fe-f9de-4950-ab3f-a7653a0a8e55.png%3Falt%3Dmedia%26token%3De6c193e1-b95e-4a2b-adc3-40c9cbe05c9f"
            alt="SKANWEAR logo" class="logo"/>
        </div>
        <span class="brand-name">SKANWEAR¬Æ</span>
        <button id="sidebarToggle" class="sidebar-toggle" aria-label="Toggle sidebar">
          <span></span><span></span><span></span>
        </button>
      </div>
      <nav>
        <ul>
          <li data-page="feedPage" class="active glass-nav">
            <span>üè†</span>
            <span class="nav-label">Feed</span>
          </li>
          <li data-page="contactsPage" class="glass-nav">
            <span>üë§</span>
            <span class="nav-label">Contacts</span>
          </li>
          <li data-page="messagesPage" class="glass-nav">
            <span>üí¨</span>
            <span class="nav-label">Messages</span>
          </li>
          <li data-page="companiesPage" class="glass-nav">
            <span>üíº</span>
            <span class="nav-label">Companies</span>
          </li>
        </ul>
      </nav>
      <button id="addProfileBtn" class="add-btn glass sidebar-btn">+ Add Profile</button>
    </aside>
    <main id="mainContent">
      <!-- Feed Section -->
      <section id="feedPage" class="page active">
        <header class="feed-header" style="padding-left:40px;">
          <h1>Feed</h1>
          <button class="add-btn glass" id="addPostBtn">+ Post</button>
        </header>
        <div class="stories-bar">
          <div class="story">
            <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Christina"/>
            <span>Christina</span>
          </div>
          <div class="story">
            <img src="https://randomuser.me/api/portraits/men/44.jpg" alt="Bobby"/>
            <span>Bobby</span>
          </div>
          <div class="story">
            <img src="https://randomuser.me/api/portraits/women/22.jpg" alt="Elina"/>
            <span>Elina</span>
          </div>
          <div class="story">
            <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="Derek"/>
            <span>Derek</span>
          </div>
          <div class="story">
            <img src="https://randomuser.me/api/portraits/women/60.jpg" alt="Christiana"/>
            <span>Christiana</span>
          </div>
          <div class="story">
            <img src="https://randomuser.me/api/portraits/men/52.jpg" alt="Alan"/>
            <span>Alan</span>
          </div>
        </div>
        <!-- FEED POSTS -->
        <div id="feedPosts" class="insta-feed">
          <!-- ... FEED POSTS as in your previous code ... -->
          <!-- (Omitted here for brevity, use your full feed posts HTML) -->
        </div>
      </section>
      <!-- Contacts Section -->
      <section id="contactsPage" class="page">
        <header>
          <h1>Contacts</h1>
        </header>
        <ul class="contacts-list">
          <!-- ... CONTACTS as in your previous code ... -->
        </ul>
      </section>
      <!-- Contact Detail Section -->
      <section id="contactDetailPage" class="page contact-detail-page">
        <button id="backToContacts" class="add-btn glass" style="margin-bottom:18px;">‚Üê Back to Contacts</button>
        <div id="contactDetailContent"></div>
      </section>
      <!-- Messages Section -->
      <section id="messagesPage" class="page">
        <header>
          <h1>Messages</h1>
        </header>
        <div class="messages-layout">
          <aside class="messages-list">
            <!-- ... MESSAGE USERS as in your previous code ... -->
          </aside>
          <div class="messages-chat-window">
            <div class="chat-header">
              <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Christina">
              <span class="chat-username">Christina</span>
            </div>
            <div class="chat-body" id="chatBody">
              <!-- Chat bubbles will be rendered here by JS -->
            </div>
            <div class="chat-footer">
              <input type="text" id="chatInput" placeholder="Type a message..." autocomplete="off"/>
              <button id="chatSendBtn">Send</button>
            </div>
          </div>
        </div>
      </section>
      <!-- Companies Section -->
      <section id="companiesPage" class="page">
        <header>
          <h1>Companies</h1>
        </header>
        <div class="companies-list"></div>
        <div id="companyEmployees" style="margin-top:32px"></div>
      </section>
    </main>
  </div>
  <!-- Loader animation and transition logic (no jQuery needed, pure JS) -->
  <script>
    // Play loader animation on page load, then show app
    window.addEventListener('DOMContentLoaded', function() {
      document.querySelector('.intro').classList.add('go');
      setTimeout(function() {
        document.getElementById('loaderScreen').style.display = 'none';
        document.getElementById('mainApp').style.display = 'block';
      }, 4700); // matches the loader animation duration
    });
  </script>
  <!-- Your main app JS remains unchanged, place below or in a separate file -->
  <script>
    // Sidebar nav button logic
    document.querySelectorAll('.sidebar nav ul li').forEach(el => {
      el.onclick = function() {
        document.querySelectorAll('.sidebar nav ul li').forEach(li => li.classList.remove('active'));
        this.classList.add('active');
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(this.dataset.page).classList.add('active');
      };
    });

    // Like and Reply button logic for each post
    document.querySelectorAll('.insta-post').forEach(function(post) {
      const likeBtn = post.querySelector('.like-btn');
      const replyBtn = post.querySelector('.reply-btn');
      const likeCount = likeBtn.querySelector('.like-count');
      const replyCount = replyBtn.querySelector('.reply-count');
      const replyMessages = post.querySelector('.reply-messages');
      let liked = false;
      let replying = false;

      // Set initial replies
      let replies = [];
      try { replies = JSON.parse(post.getAttribute('data-replies')); } catch(e) {}
      function renderReplies() {
        replyMessages.innerHTML = '';
        replies.forEach(reply => {
          const r = document.createElement('div');
          r.className = "reply-message";
          r.textContent = reply;
          replyMessages.appendChild(r);
        });
      }
      renderReplies();
      replyCount.textContent = replies.length;

      // Like button
      likeBtn.onclick = function() {
        liked = !liked;
        let count = parseInt(likeCount.textContent,10);
        if(liked) {
          likeBtn.classList.add('liked');
          likeCount.textContent = count+1;
        } else {
          likeBtn.classList.remove('liked');
          likeCount.textContent = count-1;
        }
      };

      // Reply button
      replyBtn.onclick = function() {
        if(replying) return;
        replying = true;
        replyBtn.classList.add('replying');
        // Reply box
        const box = document.createElement('div');
        box.className = 'reply-box';
        box.innerHTML = '<input type="text" maxlength="140" placeholder="Write a reply..."/><button type="button">Send</button>';
        replyMessages.parentNode.insertBefore(box, replyMessages.nextSibling);
        const input = box.querySelector('input');
        input.focus();
        box.querySelector('button').onclick = function() {
          const val = input.value.trim();
          if(val) {
            replies.push(val);
            renderReplies();
            replyCount.textContent = replies.length;
          }
          box.remove();
          replyBtn.classList.remove('replying');
          replying = false;
        };
        input.addEventListener('keydown', function(e){
          if(e.key==='Enter'){
            box.querySelector('button').click();
          }
        });
      };
    });

    // CONTACTS LIST LOGIC
    const contactsPage = document.getElementById('contactsPage');
    const contactDetailPage = document.getElementById('contactDetailPage');
    const contactDetailContent = document.getElementById('contactDetailContent');
    document.querySelectorAll('.contact-card').forEach(function(card){
      card.onclick = function() {
        contactDetailContent.innerHTML = `
          <div style="display:flex;gap:26px;align-items:center;">
            <img src="${card.dataset.avatar}" alt="${card.dataset.name}" style="width:90px;height:90px;border-radius:22px;border:4px solid #d64b43;box-shadow:0 2px 18px #d64b4340;background:#fff;">
            <div>
              <div style="font-size:1.7em;font-weight:700;color:#d64b43">${card.dataset.name}</div>
              <div style="font-size:1.09em;color:#444;margin:6px 0 8px 0;">${card.dataset.role} &bull; ${card.dataset.company}</div>
              <div style="font-size:1.04em;color:#888;"><span style="font-weight:600;">Email:</span> ${card.dataset.email}</div>
            </div>
          </div>
        `;
        contactsPage.classList.remove('active');
        contactDetailPage.classList.add('active');
      };
    });
    document.getElementById('backToContacts').onclick = function() {
      contactDetailPage.classList.remove('active');
      contactsPage.classList.add('active');
    };

    // MESSAGES TAB LOGIC
    const users = {
      "Christina": {
        avatar: "https://randomuser.me/api/portraits/women/65.jpg",
        chat: [
          {from: "them", text: "Hi, how are you?"},
          {from: "you", text: "I‚Äôm good, thanks! You?"},
          {from: "them", text: "Let‚Äôs catch up later! üëç"}
        ]
      },
      "Bobby": {
        avatar: "https://randomuser.me/api/portraits/men/44.jpg",
        chat: [
          {from: "them", text: "Sent you the docs!"},
          {from: "you", text: "Thanks Bobby, received."},
        ]
      },
      "Elina": {
        avatar: "https://randomuser.me/api/portraits/women/22.jpg",
        chat: [
          {from: "them", text: "Meeting at 3pm?"},
          {from: "you", text: "Works for me!"},
        ]
      },
      "Derek": {
        avatar: "https://randomuser.me/api/portraits/men/22.jpg",
        chat: [
          {from: "them", text: "Ready for the site visit!"},
          {from: "you", text: "See you there!"},
        ]
      }
    };
    function renderChat(user) {
      const chatBody = document.getElementById('chatBody');
      const chatHeaderImg = document.querySelector('.chat-header img');
      const chatHeaderName = document.querySelector('.chat-header .chat-username');
      chatHeaderImg.src = users[user].avatar;
      chatHeaderName.textContent = user;
      chatBody.innerHTML = '';
      users[user].chat.forEach(msg => {
        const msgDiv = document.createElement('div');
        msgDiv.className = `chat-message ${msg.from === "you" ? "yours" : "theirs"}`;
        msgDiv.innerHTML = `<div class="msg-bubble">${msg.text}</div>`;
        chatBody.appendChild(msgDiv);
      });
      chatBody.scrollTop = chatBody.scrollHeight;
    }
    document.querySelectorAll('.message-user').forEach(node => {
      node.onclick = function() {
        document.querySelectorAll('.message-user').forEach(n => n.classList.remove('active'));
        this.classList.add('active');
        renderChat(this.dataset.user);
      };
    });
    // Initial chat
    renderChat("Christina");
    // Chat send
    document.getElementById('chatSendBtn').onclick = function() {
      const input = document.getElementById('chatInput');
      const msg = input.value.trim();
      if(msg) {
        const activeUser = document.querySelector('.message-user.active').dataset.user;
        users[activeUser].chat.push({from:"you",text:msg});
        renderChat(activeUser);
        input.value = "";
      }
    };
    document.getElementById('chatInput').addEventListener('keydown', function(e){
      if(e.key==="Enter") document.getElementById('chatSendBtn').click();
    });
  </script>
</body>
</html>
